<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Attribute weights to equations — weight_allom • allodb</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Attribute weights to equations — weight_allom" />
<meta property="og:description" content="This function attributes a weight to each equation based on its sampling
size, and taxonomic and climatic similarity with the species/site combination
considered." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">allodb</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/allodb-vignette.html">Using allodb to estimate aboveground biomass</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/ropensci/allodb/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Attribute weights to equations</h1>
    <small class="dont-index">Source: <a href='https://github.com/ropensci/allodb/blob/master/R/weight_allom.R'><code>R/weight_allom.R</code></a></small>
    <div class="hidden name"><code>weight_allom.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function attributes a weight to each equation based on its sampling
size, and taxonomic and climatic similarity with the species/site combination
considered.</p>
    </div>

    <pre class="usage"><span class='fu'>weight_allom</span><span class='op'>(</span>
  <span class='va'>genus</span>,
  <span class='va'>coords</span>,
  species <span class='op'>=</span> <span class='cn'>NULL</span>,
  new_eqtable <span class='op'>=</span> <span class='cn'>NULL</span>,
  wna <span class='op'>=</span> <span class='fl'>0.1</span>,
  w95 <span class='op'>=</span> <span class='fl'>500</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>genus</th>
      <td><p>a character value, containing the genus (e.g. "Quercus") of the
tree.</p></td>
    </tr>
    <tr>
      <th>coords</th>
      <td><p>a numeric vector of length 2 with longitude and latitude.</p></td>
    </tr>
    <tr>
      <th>species</th>
      <td><p>a character vector (same length as genus), containing the
species (e.g. "rubra") of the tree. Default is <code>NULL</code>, when no species
identification is available.</p></td>
    </tr>
    <tr>
      <th>new_eqtable</th>
      <td><p>Optional. An equation table created with the
<code><a href='new_equations.html'>new_equations()</a></code> function.</p></td>
    </tr>
    <tr>
      <th>wna</th>
      <td><p>a numeric vector, this parameter is used in
the <code>weight_allom()</code> function to determine
the sample-size related weights attributed to equations
without a specified
sample size. Default is 0.1.</p></td>
    </tr>
    <tr>
      <th>w95</th>
      <td><p>a numeric vector, this parameter is used to determine the value at which the
sample-size-related weight reaches 95% of its maximum value (max=1).
Default is 500.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A named numeric vector, with one weight for each equation.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Each equation is given a weight by the function <code>weight_allom()</code>,
calculated as the product of the following components:</p>
<p>(1) sample-size weight, calculated as:</p>
<p>$$1-exp(-n*(log(20)/w95))$$</p>
<p>where n is the sample size of the equation; the weight given to equations
with no sample size information is determined by argument <code>wna</code> (0.1 by
default).</p>
<p>(2) climate weight, based on the similarity between the climatic conditions
of the equation site and the target location, using the three-letter system
of Koppen's climate scheme. Climate weights associated with each
combination of two Koppen climates are provided in <code><a href='https://rdrr.io/r/utils/data.html'>data("koppenMatrix")</a></code>.
The resulting weight has a value between 1e-6 (different climate groups)
and 1 (exactly the same climate classification). When an equation was
calibrated with trees from several locations with different Koppen
climates, the maximum value out of all pairwise equation-site climate
weights is used.</p>
<p>(3) taxonomic weight: equal to 1 for same species equations, 0.8 for same
genus equations, 0.5 for same family equations and for equations calibrated
for the same broad functional or taxonomic group (e.g. shrubs, conifers,
angiosperms). All other equations are given a low taxonomic weight of 1e-6:
these equations will have a significant relative weight in the final
prediction only when no other more specific equation is available.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='get_biomass.html'>get_biomass()</a></code>, <code><a href='new_equations.html'>new_equations()</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='va'>x</span> <span class='op'>&lt;-</span> <span class='fu'>weight_allom</span><span class='op'>(</span>
  genus <span class='op'>=</span> <span class='st'>"Acer"</span>,
  species <span class='op'>=</span> <span class='st'>"negundo"</span>,
  coords <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='op'>-</span><span class='fl'>78.2</span>, <span class='fl'>38.9</span><span class='op'>)</span>
<span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/str.html'>str</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>
</div><div class='output co'>#&gt;  Named num [1:477] 6.13e-08 5.25e-08 1.00e-07 1.00e-07 1.00e-07 ...
#&gt;  - attr(*, "names")= chr [1:477] "4b4063" "e2c7c7" "e42e41" "9f138f" ...</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>
</div><div class='output co'>#&gt;       4b4063       e2c7c7       e42e41       9f138f       9e3b6a       e57b77 
#&gt; 6.134069e-08 5.245305e-08 1.000000e-07 1.000000e-07 1.000000e-07 1.000000e-07 </div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Erika Gonzalez-Akre, Camille Piponiot, Mauro Lepore, Kristina Anderson-Teixeira.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


