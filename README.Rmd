---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r setup, echo = FALSE, message=FALSE, warning=FALSE}
set.seed(1014)

knitr::opts_chunk$set(
  comment = "#>",
  collapse = TRUE
)
```

# <img src="https://i.imgur.com/39pvr4n.png" align="right" height=44 /> allodb: Database of allometric equations

[![lifecycle](https://img.shields.io/badge/lifecycle-experimental-orange.svg)](https://www.tidyverse.org/lifecycle/#experimental)
[![Travis build status](https://travis-ci.org/forestgeo/allodb.svg?branch=master)](https://travis-ci.org/forestgeo/allodb)
[![Coverage status](https://coveralls.io/repos/github/forestgeo/allodb/badge.svg)](https://coveralls.io/r/forestgeo/allodb?branch=master)
[![CRAN status](https://www.r-pkg.org/badges/version/allodb)](https://cran.r-project.org/package=allodb)

The goal of allodb is to develop, host and give access to tables of allometric equations for ForestGEO's network.

## Installation

```
# install.packages("remotes")
remotes::install_github("forestgeo/allodb", auth_token = "abc")
```

For details in how to install packages from GitHub see [this article](https://fgeo.netlify.com/2018/02/05/2018-02-05-installing-packages-from-github/).

## Example

```{r}
library(allodb)
```

Helpers.

```{r}
# Helpers
show <- function(...) {
  out <- lapply(...)
  invisible(out)
}

allodb_datasets <- function() {
  sort(utils::data(package = "allodb")$results[ , "Item"])
}

glimpse <- function(x) {
  out <- capture.output(str(get(x), give.attr = FALSE, list.len = 3))
  cat(x, out, "\n", sep = "\n")
}
```

All datasets.

```{r}
show(allodb_datasets(), glimpse)
```

## Plan

* TODO: Move to new package __fgeo.biomass__

* TODO: Rename/refactor so the pipeline becomes:

```R
<census> %>% 
  # May be a new class of object defined in fgeo.tool, and reexported by allo
  add_species(<species>) %>%      # from census_species()
  
  # Could include an argument `default_eqn` to use different default equations,
  # e.g. different versions of allodb stored in allodb.
  allo_find() %>%         # from get_equations()
  <allo_customize()> %>%  # New: Inserts custom equations
  allo_prioritize()       # from pick_best_equations()
  allo_evaluate()         # biomass?
```

* TODO: Rename column from sp to species.

* TODO: Document when a function creates or uses an S3 class.



ENHANCEMENTS

* TODO: add_species may be a generic with methods for census and vft -- which
should be classified from reading with read_censuses, as_censuses.

* Add class vft and taxa to read_vft() and read_taxa().

* Add methods for filter() (and maybe the other 4 main verbes) so that new
classes aren't dropped.







